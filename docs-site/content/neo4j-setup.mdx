---
title: Neo4j Setup
description: Configure a Neo4j instance for use with BTMG. Choose from Docker, Neo4j Desktop, or Neo4j Aura depending on your environment.
---

BTMG requires a running Neo4j 5.x instance. Choose the option that fits your workflow.

---

## Option 1: Docker (recommended for development)

The fastest way to get started locally. Run the following command to start a Neo4j 5 container with the default credentials:

```bash
docker run -d \
  --name btmg-neo4j \
  -p 7474:7474 \
  -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/password \
  neo4j:5
```

Once the container is running:

- **Browser UI:** [http://localhost:7474](http://localhost:7474)
- **Bolt URI:** `bolt://localhost:7687`
- **Username:** `neo4j`
- **Password:** `password`

To persist data across container restarts, mount a local volume:

```bash
docker run -d \
  --name btmg-neo4j \
  -p 7474:7474 \
  -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/password \
  -v $HOME/.btmg/neo4j/data:/data \
  neo4j:5
```

---

## Option 2: Neo4j Desktop

Neo4j Desktop is a GUI application for managing local Neo4j databases. It is well suited for development environments where you prefer a visual interface.

1. Download Neo4j Desktop from [neo4j.com/download](https://neo4j.com/download/).
2. Install and open the application.
3. Create a new **Project**, then add a **Local DBMS** inside it.
4. Set a name and a password for the database.
5. Start the DBMS. The default Bolt URI will be `bolt://localhost:7687`.

Note the password you set — you will need it when configuring BTMG.

---

## Option 3: Neo4j Aura (cloud)

Neo4j Aura is a fully managed cloud database. A free tier is available and requires no infrastructure to maintain.

1. Sign up or log in at [console.neo4j.io](https://console.neo4j.io/).
2. Create a new **AuraDB Free** instance.
3. After the instance provisions, copy the **Connection URI** (format: `neo4j+s://<instance-id>.databases.neo4j.io`).
4. Save the generated password shown during creation — it is only displayed once.

---

## Configuring BTMG to Connect

Once your Neo4j instance is running, tell BTMG how to reach it. You can do this via environment variables or directly in `btmg.config.ts`.

### Environment variables

```bash
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password
```

Set these in your shell, a `.env` file (loaded via a tool such as `dotenv`), or your deployment environment.

### btmg.config.ts

Alternatively, set the connection details directly in your config file:

```ts
import { defineConfig } from "btmg-fourthspace";

export default defineConfig({
  neo4j: {
    uri: "bolt://localhost:7687",
    username: "neo4j",
    password: "password",
  },
  // ...rest of your config
});
```

Environment variables take precedence over values defined in `btmg.config.ts`, so you can use the config file as a fallback for local development while keeping secrets out of source control.

---

## Verifying the Connection

After configuring your credentials, apply the BTMG schema constraints to Neo4j by running:

```bash
npx btmg migrate
```

This command connects to your Neo4j instance, validates the schema defined in `btmg.config.ts`, and applies the necessary indexes and uniqueness constraints. A successful run confirms that BTMG can reach the database and that the graph is ready for use.

If the command fails, check that:

- The Neo4j instance is running and reachable on the configured URI.
- The username and password are correct.
- Firewall or network rules allow connections on the Bolt port (default `7687`).
